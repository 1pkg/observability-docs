The Elastic APM .NET agent auto-instruments supported technologies and records interesting events, like HTTP requests and database queries.
To do this, it uses built-in capabilities of the instrumented frameworks like
[Diagnostic Source](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.diagnosticsource?view=netcore-3.0),
an HTTP module for IIS, or
[IDbCommandInterceptor](https://docs.microsoft.com/en-us/dotnet/api/system.data.entity.infrastructure.interception.idbcommandinterceptor?view=entity-framework-6.2.0) for Entity Framework.
This means that for the supported technologies, there are no code changes required beyond enablingauto-instrumentation.

The Agent automatically registers callback methods for built-in Diagnostic Source events.
With this, the supported frameworks trigger Agent code for relevant events to measure their duration and collect metadata, like DB statements, as well as HTTP related information, like the URL, parameters, and headers.
These events, called Transactions and Spans, are sent to Elastic, where they're transformed, stored, and ready to be visualized.