

<div id="config-core"></div>

<div id="config-recording"></div>

### `Recording` (<DocBadgeAdded tipContent="Added in 1.7.0">1.7.0</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

A Boolean specifying if the agent should be recording or not.
When recording, the agent captures HTTP requests, tracks errors, and collects and sends metrics.
When not recording, the agent works as a noop, where it does not collect data or communicate with the APM server,
except for polling the central configuration endpoint.
This is a reversible switch, so the agent threads are not killed when deactivated, but they will be
mostly idle in this state, so the overhead should be negligible.

Use this setting to dynamically disable Elastic APM at runtime.

<DocCallOut title="Warning" color="warning">
Setting `Recording` to `false` influences the behavior of the <DocLink id="serverlessObservabilityApmAgentsNetApi">Public API</DocLink>. When the agent is not active, it won't keep track of transactions, spans, and any related properties.
</DocCallOut>

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_RECORDING`         | `ElasticApm:Recording` |

| Default | Type |
|---|---|
| `true`         | Boolean |

<div id="config-enabled"></div>

### `Enabled` (<DocBadgeAdded tipContent="Added in 1.7.0">1.7.0</DocBadgeAdded>)

Setting this to `false` will completely disable the agent, including instrumentation and remote config polling.
If you want to dynamically change the status of the agent, use <DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="recording-added[170]">`recording`</DocLink> instead.

<DocCallOut title="Warning" color="warning">
Setting `Enabled` to `false` influences the behavior of the <DocLink id="serverlessObservabilityApmAgentsNetApi">Public API</DocLink>. When the agent is not active, it won't keep track of transactions, spans, and any related properties.
</DocCallOut>

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_ENABLED`           | `ElasticApm:Enabled` |

| Default | Type |
|---|---|
| `true`         | Boolean |

<div id="config-service-name"></div>

### `ServiceName`

This is used to keep all the errors and transactions of your service together
and is the primary filter in the Elastic APM user interface.

<DocCallOut title="Note">
The service name must conform to this regular expression: `^[a-zA-Z0-9 _-]+$`. In other words, your service name must only contain characters from the ASCII alphabet, numbers, dashes, underscores, and spaces. Characters in service names that don't match the regular expression will be replaced with the `_` symbol. 
</DocCallOut>

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_SERVICE_NAME` | `ElasticApm:ServiceName` |

| Default | Type |
|---|---|
| Name of the entry assembly       | String |

<div id="config-service-node-name"></div>

### `ServiceNodeName` (<DocBadgeAdded tipContent="Added in 1.3">1.3</DocBadgeAdded>)

This is an optional name used to differentiate between nodes in a service.
If this is not set, data aggregations are done based on a container ID (where valid) or on the reported hostname (automatically discovered).

<DocCallOut title="Note">
This feature requires APM Server versions >= 7.5
</DocCallOut>

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_SERVICE_NODE_NAME` | `ElasticApm:ServiceNodeName` |

| Default | Type |
|---|---|
| `<none>`       | String |

<div id="config-service-version"></div>

### `ServiceVersion`

A version string for the currently deployed version of the service. If you donâ€™t
version your deployments, the recommended value for this field is the commit identifier
of the deployed revision, e.g. the output of `git rev-parse HEAD`. 

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_SERVICE_VERSION` | `ElasticApm:ServiceVersion` |

| Default | Type |
|---|---|
| Informational version of the entry assembly    | String |

<div id="config-hostname"></div>

### `HostName` (<DocBadgeAdded tipContent="Added in 1.7">1.7</DocBadgeAdded>)

This allows for the reported hostname to be manually specified. If this is not set, the hostname will be looked up.

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_HOSTNAME` | `ElasticApm:HostName` |

| Default | Type |
|---|---|
| `<none>`                                       | String |

<div id="config-environment"></div>

### `Environment` (<DocBadgeAdded tipContent="Added in 1.1">1.1</DocBadgeAdded>)

The name of the environment that this service is deployed in, e.g. "production" or "staging".

Environments allow you to easily filter data on a global level in the APM app.
It's important to be consistent when naming environments across agents.
See [environment selector](((apm-app-ref))/filters.html#environment-selector) in the Kibana UI for more information.

<DocCallOut title="Note">
This feature is fully supported in the APM app in Kibana versions >= 7.2.
You must use the query bar to filter for a specific environment in versions prior to 7.2.
</DocCallOut>

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_ENVIRONMENT`      | `ElasticApm:Environment` |

| Default | Type |
|---|---|
| See note below | String |

<DocCallOut title="Note">
On ASP.NET Core application the agent uses [EnvironmentName from IHostingEnvironment](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.ihostingenvironment.environmentname?view=aspnetcore-2.2#Microsoft_AspNetCore_Hosting_IHostingEnvironment_EnvironmentName) as default environment name.
</DocCallOut>

<div id="config-transaction-sample-rate"></div>

### `TransactionSampleRate`

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

By default, the agent samples every transaction (e.g. a request to your service).
To reduce overhead and storage requirements, set the sample rate to a value between 0.0 and 1.0.
The agent will still record the overall time and result for unsampled transactions,
but no context information, labels, or spans will be recorded.

<DocCallOut title="Note">
When parsing the value for this option, the agent doesn't consider the current culture.
It also expects that a period (`.`) is used to separate the integer and the fraction of a floating-point number.
</DocCallOut>

This setting can be changed after the agent starts.

| Environment variable name | IConfiguration or Web.config key |
|---|---|
| `ELASTIC_APM_TRANSACTION_SAMPLE_RATE` | `ElasticApm:TransactionSampleRate` |

| Default | Type |
|---|---|
| 1.0     | Double |

<div id="config-transaction-max-spans"></div>

### `TransactionMaxSpans` (performance) (<DocBadgeAdded tipContent="Added in 1.1.1">1.1.1</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

This limits the amount of spans that are recorded per transaction.
This is helpful when a transaction creates a very high amount of spans,
for example, thousands of SQL queries.
Setting an upper limit helps prevent overloading the Agent and APM server in these edge cases.

<DocCallOut title="Note">
A value of `0` means that spans will never be collected.
Setting `-1` means that spans will never be dropped.
The Agent will revert to the default value if the value is set below `-1`.
</DocCallOut>

This setting can be changed after agent starts.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_TRANSACTION_MAX_SPANS` | `ElasticApm:TransactionMaxSpans` |

| Default | Type |
|---|---|
| `500`     | Integer |

<div id="config-central-config"></div>

### `CentralConfig` (<DocBadgeAdded tipContent="Added in 1.1">1.1</DocBadgeAdded>)

If set to `true`, the agent makes periodic requests to the APM Server to fetch
the latest [APM Agent configuration](((apm-app-ref))/agent-configuration.html).

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_CENTRAL_CONFIG` | `ElasticApm:CentralConfig` |

| Default | Type |
|---|---|
| true    | Boolean |

<div id="config-sanitize-field-names"></div>

### `SanitizeFieldNames` (<DocBadgeAdded tipContent="Added in 1.2">1.2</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

Sometimes it is necessary to sanitize, i.e., remove, sensitive data sent to Elastic APM.
This config accepts a list of wildcard patterns of field names which should be sanitized.
These apply to HTTP headers and `application/x-www-form-urlencoded` data.

<DocCallOut title="Important" color="warning">
This setting only applies to values that are captured automatically by the agent. If you capture the request body manually with the public API, this configuration doesn't apply, and the agent won't sanitize the body.
</DocCallOut>

The wildcard, `*`, matches zero or more characters, and matching is case insensitive by default.
Prepending an element with `(?-i)` makes the matching case sensitive.
Examples: `/foo/*/bar/*/baz*`, `*foo*`.

Please be sure to review the data captured by Elastic APM carefully to make sure it does not contain sensitive information.
If you do find sensitive data in your ((es)) index, add an additional entry to this list.
Setting a value here will overwrite the defaults, so be sure to include the default entries as well.

<DocCallOut title="Note">
Sensitive information should not be sent in the query string. Data in the query string is considered non-sensitive.
See [owasp.org](https://www.owasp.org/index.php/Information_exposure_through_query_strings_in_url) for more information.
</DocCallOut>

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_SANITIZE_FIELD_NAMES` | `ElasticApm:SanitizeFieldNames` |

| Default | Type |
|---|---|
| `password, passwd, pwd, secret, **key, **token*, **session**, **credit**, **card**, **auth**, set-cookie, **principal**` | Comma separated string |

<div id="config-global-labels"></div>

### `GlobalLabels` (<DocBadgeAdded tipContent="Added in 1.2">1.2</DocBadgeAdded>)

Labels are added to all events with the format `key=value[,key=value[,...]]`.
Any labels set by the application via the agent's public API will override global labels with the same keys.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_GLOBAL_LABELS` | `ElasticApm:GlobalLabels` |

| Default | Type |
|---|---|
| `<empty map>` | Map of string to string |

<DocCallOut title="Note">
This option requires APM Server 7.2 or later. It will have no effect on older versions.
</DocCallOut>

<div id="config-span-compression-enabled"></div>

### `SpanCompressionEnabled` (<DocBadgeAdded tipContent="Added in 1.14">1.14</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

Setting this option to true will enable span compression feature. Span compression reduces the collection, processing, and storage overhead, and removes clutter from the UI. 
The tradeoff is that some information such as DB statements of all the compressed spans will not be collected.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_SPAN_COMPRESSION_ENABLED` | `ElasticApm:SpanCompressionEnabled` |

| Default | Type |
|---|---|
| `true`   | Boolean |

<div id="config-span-compression-exact-match-max-duration"></div>

### `SpanCompressionExactMatchMaxDuration` (<DocBadgeAdded tipContent="Added in 1.14">1.14</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

Consecutive spans that are exact match and that are under this threshold will be compressed into a single composite span.
This option does not apply to composite spans. This reduces the collection, processing, and storage overhead, and removes clutter from the UI.
The tradeoff is that the DB statements of all the compressed spans will not be collected.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_SPAN_COMPRESSION_EXACT_MATCH_MAX_DURATION` | `ElasticApm:SpanCompressionExactMatchMaxDuration` |

| Default | Type |
|---|---|
| `50ms`  | TimeDuration |

<div id="config-span-compression-same-kind-max-duration"></div>

### `SpanCompressionSameKindMaxDuration` (<DocBadgeAdded tipContent="Added in 1.14">1.14</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

Consecutive spans to the same destination that are under this threshold will be compressed into a single composite span.
This option does not apply to composite spans.
This reduces the collection, processing, and storage overhead, and removes clutter from the UI. The tradeoff is that the DB statements of all the compressed spans will not be collected.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_SPAN_COMPRESSION_SAME_KIND_MAX_DURATION` | `ElasticApm:SpanCompressionSameKindMaxDuration` |

| Default | Type |
|---|---|
| `0ms`   | TimeDuration |

<div id="config-exit-span-min-duration"></div>

### `ExitSpanMinDuration` (<DocBadgeAdded tipContent="Added in 1.14">1.14</DocBadgeAdded>)

<DocLink id="serverlessObservabilityApmAgentsNetConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>

Sets the minimum duration of exit spans. Exit spans with a duration lesser than this threshold are attempted to be discarded.
If the exit span is equal or greater the threshold, it should be kept.
In some cases exit spans cannot be discarded. For example, spans that propagate the trace context to downstream services,
such as outgoing HTTP requests, can't be discarded.
However, external calls that don't propagate context, such as calls to a database, can be discarded using this threshold.
Additionally, spans that lead to an error can't be discarded.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_EXIT_SPAN_MIN_DURATION` | `ElasticApm:ExitSpanMinDuration` |

| Default | Type |
|---|---|
| `0ms`  | TimeDuration |

<div id="config-opentelemetry-bridge-enabled"></div>

### `OpentelemetryBridgeEnabled` (<DocBadgeAdded tipContent="Added in 1.13">1.13</DocBadgeAdded>)

Setting this option to true will enable the <DocBadge><DocIcon size="s" type="unlink" title="missing link"/> missing link</DocBadge>{/*  <DocLink id="enApmAgentDotnetOpentelemetryBridge">OpenTelemetry Bridge</DocLink> */}. This enables the use of the vendor-neutral OpenTelemetry Tracing API (the [Activity API](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.activity?view=net-5.0) in .NET) to manually instrument your code, and have the Elastic .NET APM agent handle those API calls.

| Environment variable name | IConfiguration key |
|---|---|
| `ELASTIC_APM_OPENTELEMETRY_BRIDGE_ENABLED` | `ElasticApm:OpentelemetryBridgeEnabled` |

| Default | Type |
|---|---|
| `false`  | Boolean |

