---
id: serverlessObservabilityApmAgentsGo
slug: /serverless/observability/apm-agents-go
title: Go
# description: Description to be written
tags: [ 'serverless', 'observability', '' ]
status: rough content
---

import RoughContent from '../partials/rough-content-notice.mdx'

<RoughContent />

<div id="introduction"></div>

The Elastic APM Go Agent enables you to trace the execution of operations in your [Go](https://golang.org/)
applications, sending performance metrics and errors to the Elastic APM server.
It has built-in support for popular frameworks and toolkits,
like [Gorilla](http://www.gorillatoolkit.org/) and [Gin](https://gin-gonic.com/),
as well as support for instrumenting Go's built-in [net/http](https://golang.org/pkg/net/http/),
[database/sql](https://golang.org/pkg/database/sql/) drivers.
The Agent also offers an <DocLink id="serverlessObservabilityApmAgentsGoApi">API Documentation</DocLink> for custom instrumentation.

<div id="how-it-works"></div>

## How does the Agent work?

The Agent includes instrumentation modules for <DocLink id="serverlessObservabilityApmAgentsGoSupportedTechnologies">Supported Technologies</DocLink>,
each providing middleware or wrappers for recording interesting events, such as incoming HTTP requests, outgoing HTTP requests, and database queries.

To collect data about incoming HTTP requests, install router middleware for one of the supported <DocLink id="serverlessObservabilityApmAgentsGoSupportedTechnologies" section="web-frameworks">Web Frameworks</DocLink>.
Incoming requests will be recorded as transactions, along with any related panics or errors.

To collect data for outgoing HTTP requests, instrument an `http.Client` or `http.Transport` using <DocBadge><DocIcon size="s" type="unlink" title="missing link"/> missing link</DocBadge>{/*  <DocLink id="enApmAgentGoBuiltinModules" section="moduleapmhttp">module/apmhttp</DocLink> */}.
To collect data about database queries, use <DocBadge><DocIcon size="s" type="unlink" title="missing link"/> missing link</DocBadge>{/*  <DocLink id="enApmAgentGoBuiltinModules" section="moduleapmsql">module/apmsql</DocLink> */},
which provides instrumentation for well known database drivers.

In order to connect transactions with related spans and errors, and propagate traces between services (distributed tracing),
the agent relies on Go's built-in [context](https://golang.org/pkg/context/) package:
transactions and spans are stored in context objects.
For example, for incoming HTTP requests, in-flight trace data will be recorded in the `context` object accessible through
[net/http.Context](https://golang.org/pkg/net/http/#Request.Context).
Read more about this in <DocBadge><DocIcon size="s" type="unlink" title="missing link"/> missing link</DocBadge>{/*  <DocLink id="enApmAgentGoCustomInstrumentationPropagation">Context propagation</DocLink> */}.

In addition to capturing events like those mentioned above,
the agent also collects system and application metrics at regular intervals.
This collection happens in a background goroutine that is automatically started when the agent is initialized.

<div id="additional-components"></div>

## Additional Components

APM Agents work in conjunction with the [APM Server](((apm-guide-ref))/index.html), [Elasticsearch](((ref))/index.html), and [Kibana](((kibana-ref))/index.html).
The [APM Guide](((apm-guide-ref))/index.html) provides details on how these components work together,
and provides a matrix outlining [Agent and Server compatibility](((apm-guide-ref))/agent-server-compatibility.html).
