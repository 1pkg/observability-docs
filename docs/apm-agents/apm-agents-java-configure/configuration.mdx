

<div id="configuration"></div>

To adapt the Elastic APM Java agent to your needs,
you can configure it using one of the methods below, listed in descending order of precedence:

<DocTable columns={[
  {
    "title": "",
    "width": "50%"
  },
  {
    "title": "",
    "width": "50%"
  }
]}>
  <DocRow>
    <DocCell>
      1) [Central configuration](((apm-app-ref))/agent-configuration.html)
      
    </DocCell>
    <DocCell>
      Configure the Agent in the Kibana APM app.
      <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge> </DocLink>
      
      
    </DocCell>
  </DocRow>
  <DocRow>
    <DocCell>
      2) Properties file
      
    </DocCell>
    <DocCell>
      The `elasticapm.properties` file is located in the same folder as the agent jar,
      or provided through the <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="config_file-added[180]">`config_file`</DocLink> option.
      <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge></DocLink>
      
      
    </DocCell>
  </DocRow>
  <DocRow>
    <DocCell>
      3) Java system properties
      
    </DocCell>
    <DocCell>
      All configuration keys are prefixed with `elastic.apm.`
      <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="dynamic-configuration"><DocBadge>Dynamic</DocBadge></DocLink>
      
      
    </DocCell>
  </DocRow>
  <DocRow>
    <DocCell>
      4) Environment variables
      
    </DocCell>
    <DocCell>
      All configuration keys are in uppercase and prefixed with `ELASTIC_APM_`.
      
      
    </DocCell>
  </DocRow>
  <DocRow>
    <DocCell>
      5) Runtime attach parameters
      
    </DocCell>
    <DocCell>
      ((nbsp))
      
      1. `--config` parameter.
          See <DocLink id="serverlessObservabilityApmAgentsJavaGetStarted">Automatic setup with `apm-agent-attach-cli.jar`</DocLink>.

      1. Arguments of `ElasticApmAttacher.attach(...)`.
          See <DocLink id="serverlessObservabilityApmAgentsJavaGetStarted">Programmatic API setup to self-attach</DocLink>.

      1. `elasticapm.properties` in classpath root with `ElasticApmAttacher.attach()`.
          See <DocLink id="serverlessObservabilityApmAgentsJavaGetStarted">Programmatic API setup to self-attach</DocLink>.

      
      
    </DocCell>
  </DocRow>
  <DocRow>
    <DocCell>
      6) Default values
      
    </DocCell>
    <DocCell>
      Defined for each configuration.
      
      
    </DocCell>
  </DocRow>
</DocTable>

<div id="configuration-dynamic"></div>

### Dynamic configuration <DocBadge>Dynamic</DocBadge>

Configuration options marked with Dynamic true can be changed at runtime when set from supported sources:

- [Central configuration](((apm-app-ref))/agent-configuration.html)
- `elasticapm.properties` file
- Java system properties, but only when set from within the application

<DocCallOut title="Note">
There are two distinct ways to use `elasticapm.properties`: as an external configuration file, and as a classpath resource.
Only the external file can be used for dynamic configuration.
</DocCallOut>

<div id="configuration-minimal"></div>

### Minimal configuration

In order to get started with Elastic APM,
the most important configuration options are <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="service_name">`service_name`</DocLink>,
<DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="server_url">`server_url`</DocLink> and <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="application_packages">`application_packages`</DocLink>.
Note that even these settings are optional.
Click on their name to see how the default values are determined.

An example configuration looks like this:

<p id="system-properties"><strong>System properties</strong></p>

```bash
-Delastic.apm.service_name=my-cool-service
-Delastic.apm.application_packages=org.example,org.another.example
-Delastic.apm.server_url=http://127.0.0.1:8200
```

<p id="elasticapmproperties"><strong>elasticapm.properties</strong></p>

```properties
service_name=my-cool-service
application_packages=org.example,org.another.example
server_url=http://127.0.0.1:8200
```

<p id="environment-variables"><strong>Environment variables</strong></p>

```bash
ELASTIC_APM_SERVICE_NAME=my-cool-service
ELASTIC_APM_APPLICATION_PACKAGES=org.example,org.another.example
ELASTIC_APM_SERVER_URL=http://127.0.0.1:8200
```

### Option reference

This is a list of all configuration options grouped by their category.
Click on a key to get more information.

* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Circuit-Breaker configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="circuit_breaker_enabled-added[1140]-performance">`circuit_breaker_enabled` (added[1.14.0] performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stress_monitoring_interval-performance">`stress_monitoring_interval` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stress_monitor_gc_stress_threshold-performance">`stress_monitor_gc_stress_threshold` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stress_monitor_gc_relief_threshold-performance">`stress_monitor_gc_relief_threshold` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stress_monitor_cpu_duration_threshold-performance">`stress_monitor_cpu_duration_threshold` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stress_monitor_system_cpu_stress_threshold-performance">`stress_monitor_system_cpu_stress_threshold` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stress_monitor_system_cpu_relief_threshold-performance">`stress_monitor_system_cpu_relief_threshold` (performance)</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Core configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="recording-added[1150]">`recording` (added[1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="enabled-added[1180]">`enabled` (added[1.18.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="instrument-added[100changing-this-value-at-runtime-is-possible-since-version-1150]">`instrument` (added[1.0.0,Changing this value at runtime is possible since version 1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="service_name">`service_name`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="service_node_name-added[1110]">`service_node_name` (added[1.11.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="service_version">`service_version`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="hostname-added[1100]">`hostname` (added[1.10.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="environment">`environment`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="transaction_sample_rate-performance">`transaction_sample_rate` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="transaction_max_spans-performance">`transaction_max_spans` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="long_field_max_length-performance-added[1370]">`long_field_max_length` (performance added[1.37.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="sanitize_field_names-security">`sanitize_field_names` (security)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="enable_instrumentations-added[1280]">`enable_instrumentations` (added[1.28.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="disable_instrumentations-added[100changing-this-value-at-runtime-is-possible-since-version-1150]">`disable_instrumentations` (added[1.0.0,Changing this value at runtime is possible since version 1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="enable_experimental_instrumentations-added[1250]">`enable_experimental_instrumentations` (added[1.25.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="unnest_exceptions">`unnest_exceptions`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="ignore_exceptions-added[1110]">`ignore_exceptions` (added[1.11.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="capture_body-performance">`capture_body` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="capture_headers-performance">`capture_headers` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="global_labels-added[170-requires-apm-server-72]">`global_labels` (added[1.7.0, Requires APM Server 7.2+])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="instrument_ancient_bytecode-added[1350]">`instrument_ancient_bytecode` (added[1.35.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="classes_excluded_from_instrumentation">`classes_excluded_from_instrumentation`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="trace_methods-added[100changing-this-value-at-runtime-is-possible-since-version-1150]">`trace_methods` (added[1.0.0,Changing this value at runtime is possible since version 1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="trace_methods_duration_threshold-added[170]">`trace_methods_duration_threshold` (added[1.7.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="central_config-added[180]">`central_config` (added[1.8.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="breakdown_metrics-added[180]">`breakdown_metrics` (added[1.8.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="config_file-added[180]">`config_file` (added[1.8.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="plugins_dir-experimental">`plugins_dir` (experimental)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="use_elastic_traceparent_header-added[1140]">`use_elastic_traceparent_header` (added[1.14.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="disable_outgoing_tracecontext_headers-added[1370]">`disable_outgoing_tracecontext_headers` (added[1.37.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="span_min_duration-added[1160]">`span_min_duration` (added[1.16.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="cloud_provider-added[1210]">`cloud_provider` (added[1.21.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="enable_public_api_annotation_inheritance-performance">`enable_public_api_annotation_inheritance` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="transaction_name_groups-added[1330]">`transaction_name_groups` (added[1.33.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="trace_continuation_strategy-added[1340]">`trace_continuation_strategy` (added[1.34.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Datastore configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="elasticsearch_capture_body_urls-added[1370]">`elasticsearch_capture_body_urls` (added[1.37.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="mongodb_capture_statement_commands">`mongodb_capture_statement_commands`</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">HTTP configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="capture_body_content_types-added[150]-performance">`capture_body_content_types` (added[1.5.0] performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="transaction_ignore_urls">`transaction_ignore_urls`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="transaction_ignore_user_agents-added[1220]">`transaction_ignore_user_agents` (added[1.22.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="use_path_as_transaction_name-added[100changing-this-value-at-runtime-is-possible-since-version-1220]">`use_path_as_transaction_name` (added[1.0.0,Changing this value at runtime is possible since version 1.22.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="url_groups-deprecated">`url_groups` (deprecated)</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Huge Traces configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="span_compression_enabled-added[1300]">`span_compression_enabled` (added[1.30.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="span_compression_exact_match_max_duration-added[1300]">`span_compression_exact_match_max_duration` (added[1.30.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="span_compression_same_kind_max_duration-added[1300]">`span_compression_same_kind_max_duration` (added[1.30.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="exit_span_min_duration-added[1300]">`exit_span_min_duration` (added[1.30.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">JAX-RS configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="enable_jaxrs_annotation_inheritance-performance">`enable_jaxrs_annotation_inheritance` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="use_jaxrs_path_as_transaction_name-added[180]">`use_jaxrs_path_as_transaction_name` (added[1.8.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">JMX configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="capture_jmx_metrics-added[1110]">`capture_jmx_metrics` (added[1.11.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Logging configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_level">`log_level`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_file">`log_file`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_ecs_reformatting-added[1220]-experimental">`log_ecs_reformatting` (added[1.22.0] experimental)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_ecs_reformatting_additional_fields-added[1260]">`log_ecs_reformatting_additional_fields` (added[1.26.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_ecs_formatter_allow_list">`log_ecs_formatter_allow_list`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_ecs_reformatting_dir">`log_ecs_reformatting_dir`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_file_size-added[1170]">`log_file_size` (added[1.17.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_format_sout-added[1170]">`log_format_sout` (added[1.17.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_format_file-added[1170]">`log_format_file` (added[1.17.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="log_sending-added[1360]-experimental">`log_sending` (added[1.36.0] experimental)</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Messaging configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="ignore_message_queues">`ignore_message_queues`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="jms_listener_packages-performance-added[1360]">`jms_listener_packages` (performance added[1.36.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Metrics configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="dedot_custom_metrics-added[1220]">`dedot_custom_metrics` (added[1.22.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="custom_metrics_histogram_boundaries-added[1370]-experimental">`custom_metrics_histogram_boundaries` (added[1.37.0] experimental)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="metric_set_limit-added[1330]">`metric_set_limit` (added[1.33.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="agent_reporter_health_metrics-added[1350]-experimental">`agent_reporter_health_metrics` (added[1.35.0] experimental)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="agent_background_overhead_metrics-added[1350]-experimental">`agent_background_overhead_metrics` (added[1.35.0] experimental)</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Profiling configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_enabled-added[1150]-experimental">`profiling_inferred_spans_enabled` (added[1.15.0] experimental)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_logging_enabled-added[1370]">`profiling_inferred_spans_logging_enabled` (added[1.37.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_sampling_interval-added[1150]">`profiling_inferred_spans_sampling_interval` (added[1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_min_duration-added[1150]">`profiling_inferred_spans_min_duration` (added[1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_included_classes-added[1150]">`profiling_inferred_spans_included_classes` (added[1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_excluded_classes-added[1150]">`profiling_inferred_spans_excluded_classes` (added[1.15.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="profiling_inferred_spans_lib_directory-added[1180]">`profiling_inferred_spans_lib_directory` (added[1.18.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Reporter configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="secret_token">`secret_token`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="api_key">`api_key`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="server_url">`server_url`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="server_urls">`server_urls`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="disable_send">`disable_send`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="server_timeout">`server_timeout`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="verify_server_cert">`verify_server_cert`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="max_queue_size">`max_queue_size`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="include_process_args">`include_process_args`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="api_request_time">`api_request_time`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="api_request_size">`api_request_size`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="metrics_interval-added[130]">`metrics_interval` (added[1.3.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="disable_metrics-added[130]">`disable_metrics` (added[1.3.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Serverless configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="aws_lambda_handler-added[1280]">`aws_lambda_handler` (added[1.28.0])</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="data_flush_timeout-added[1280]">`data_flush_timeout` (added[1.28.0])</DocLink>
* <DocLink id="serverlessObservabilityApmAgentsJavaConfigure">Stacktrace configuration options</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="application_packages">`application_packages`</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="stack_trace_limit-performance">`stack_trace_limit` (performance)</DocLink>
    * <DocLink id="serverlessObservabilityApmAgentsJavaConfigure" section="span_stack_trace_min_duration-performance">`span_stack_trace_min_duration` (performance)</DocLink>

