---
id: serverlessObservabilityApmAgentsPythonGetStarted
slug: /serverless/observability/monitor-application-performance-apm-send-traces-to-elastic-python-get-started
title: Get started
# description: Description to be written
tags: [ 'serverless', 'observability', '' ]
---


<div id="aiohttp-server-support"></div>

Getting Elastic APM set up for your Aiohttp Server project is easy,
and there are various ways you can tweak it to fit to your needs.

<div id="aiohttp-server-installation"></div>

## Installation

Install the Elastic APM agent using pip:

```bash
$ pip install elastic-apm
```

or add `elastic-apm` to your project's `requirements.txt` file.

<div id="aiohttp-server-setup"></div>

## Setup

To set up the agent, you need to initialize it with appropriate settings.

The settings are configured either via environment variables,
the application's settings, or as initialization arguments.

You can find a list of all available settings in the <DocLink id="serverlessObservabilityApmAgentsPythonConfigure">Configuration</DocLink> page.

To initialize the agent for your application using environment variables:

```python
from aiohttp import web

from elasticapm.contrib.aiohttp import ElasticAPM

app = web.Application()

apm = ElasticAPM(app)
```

To configure the agent using `ELASTIC_APM` in your application's settings:

```python
from aiohttp import web

from elasticapm.contrib.aiohttp import ElasticAPM

app = web.Application()

app['ELASTIC_APM'] = {
    'SERVICE_NAME': '<SERVICE-NAME>',
    'SECRET_TOKEN': '<SECRET-TOKEN>',
}
apm = ElasticAPM(app)
```

<div id="aiohttp-server-usage"></div>

## Usage

Once you have configured the agent,
it will automatically track transactions and capture uncaught exceptions within aiohttp.

Capture an arbitrary exception by calling <DocLink id="serverlessObservabilityApmAgentsPythonApi" section="clientcapture_exception">`capture_exception`</DocLink>:

```python
try:
    1 / 0
except ZeroDivisionError:
    apm.client.capture_exception()
```

Log a generic message with <DocLink id="serverlessObservabilityApmAgentsPythonApi" section="clientcapture_message">`capture_message`</DocLink>:

```python
apm.client.capture_message('hello, world!')
```

<div id="aiohttp-server-performance-metrics"></div>

## Performance metrics

If you've followed the instructions above, the agent has already installed our middleware.
This will measure response times, as well as detailed performance data for all supported technologies.

<DocCallOut title="Note">
due to the fact that `asyncio` drivers are usually separate from their synchronous counterparts,
specific instrumentation is needed for all drivers.
The support for asynchronous drivers is currently quite limited.
</DocCallOut>

<div id="aiohttp-server-ignoring-specific-views"></div>

### Ignoring specific routes

You can use the <DocLink id="serverlessObservabilityApmAgentsPythonConfigure" section="transactions_ignore_patterns">`TRANSACTIONS_IGNORE_PATTERNS`</DocLink> configuration option to ignore specific routes.
The list given should be a list of regular expressions which are matched against the transaction name:

```python
app['ELASTIC_APM'] = {
    # ...
    'TRANSACTIONS_IGNORE_PATTERNS': ['^OPTIONS ', '/api/']
    # ...
}
```

This would ignore any requests using the `OPTIONS` method
and any requests containing `/api/`.

<div id="supported-aiohttp-and-python-versions"></div>

## Supported aiohttp and Python versions

A list of supported <DocLink id="serverlessObservabilityApmAgentsPythonSupportedTechnologies" section="aiohttp-server">aiohttp</DocLink> and {/* <DocLink id="enApmAgentPythonSupportedTechnologies" section="python">Python</DocLink> */} versions can be found on our {/* <DocLink id="enApmAgentPythonSupportedTechnologies">Supported Technologies</DocLink> */} page.  

<DocCallOut title="Note">
Elastic APM only supports `asyncio` when using Python 3.7+ 
</DocCallOut>

