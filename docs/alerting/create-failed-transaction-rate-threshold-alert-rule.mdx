---
id: serverlessObservabilityCreateFailedTransactionRateThresholdAlertRule
slug: /serverless/observability/create-failed-transaction-rate-threshold-alert-rule
title: Create failed transaction rate threshold alert rule
description: Get alerts when the rate of transaction errors in a service exceeds a defined threshold.
tags: [ 'serverless', 'observability', 'how-to', 'alerting' ]
status: in testing
---

import Feedback from '../partials/feedback/widget.mdx'
import Actions from '../transclusion/actions.mdx'

<DocBadge template="technical preview" />
You can create a failed transaction rate threshold rule to alert you when the rate of transaction errors in a service exceeds a defined threshold. Threshold rules can be set at different levels: environment, service, transaction type, and/or transaction name. Add actions to raise alerts via services or third-party integrations e.g. mail, Slack, Jira.  

![Create rule for failed transaction rate threshold alert](../images/alerts-create-rule-failed-transaction-rate.png)

<div id="create-failed-transaction-rate-threshold-rule"></div>

To create your failed transaction rate threshold rule:

1. Select **Manage Rules** from the **Alerts** page, and select **Create rule**.
1. Enter a **Name** for your rule, and any optional **Tags** for more granular reporting (leave blank if unsure).
1. Select the **Failed transaction rate threshold** rule type from the APM use case.
1. Select the appropriate **Service**, **Type**, **Environment** and **Name** (or leave **ALL** to include all options). Alternatively, you can select **Use KQL Filter** and enter a KQL expression to limit the scope of your rule.
1. Enter a fail rate in the **Is Above** (defaults to 30%).
1. Define the period to be assessed in **For the last** (defaults to last 5 minutes).
1. Choose how to **Group alerts by**. Every unique value will create an alert.
1. Define the interval to check the rule (for example, check every 1 minute).
1. (Optional) Set up **Actions**.
1. **Save** your rule.

<DocCallOut title="Tip">
You can also create a failed transaction rate threshold rule directly from any page within **Applications**. Click the **Alerts and rules** button, and select **Create threshold rule** and then **Failed transaction rate**. When you create a rule this way, the **Name** and **Tags** fields will be prepopulated but you can still change these. 
</DocCallOut>

<Actions />

<div id="create-failed-transaction-rate-threshold-example"></div>
## Example

The failed transaction rate threshold alert triggers when the number of transaction errors in a service exceeds a defined threshold. 

Before continuing, identify the service name, environment name, and transaction type that youâ€™d like to create a failed transaction rate threshold rule for. 

This guide will create an alert for an error group ID based on the following criteria:

* Service: `{your_service.name}`
* Transaction: `{your_transaction.name}`
* Environment: `{your_service.environment}`
* Error rate is above 30% for the last five minutes
* Group alerts by `service.name` and `service.environment`
* Check every 1 minute
* Send the alert via email to the site reliability team

From any page in **Applications**, select **Alerts and rules** -> **Create threshold rule** -> **Failed transaction rate**. Change the name of the alert (if you wish), but do not edit the tags.

Based on the criteria above, define the following rule details:

* **Service**: `{your_service.name}`
* **Type**: `{your_transaction.name}`
* **Environment**: `{your_service.environment}`
* **Is above:** `30%`
* **For the last:** `5 minutes`
* **Group alerts by:** `service.name` `service.environment`
* **Check every:** `1 minute`

Next, select the **Email** connector and click **Create a connector**. Fill out the required details: sender, host, port, etc., and select **Save**.

A default message is provided as a starting point for your alert. You can use the Mustache template syntax (`{{variable}}`) to pass additional alert values at the time a condition is detected to an action. A list of available variables can be accessed by clicking the Add variable icon <DocIcon type="indexOpen" title="Add variable" />.

Select **Save**. The alert has been created and is now active!

<Feedback slug="/serverless/observability/create-failed-transaction-rate-threshold-alert-rule" />


