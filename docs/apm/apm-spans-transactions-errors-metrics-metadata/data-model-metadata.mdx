

<div id="data-model-metadata"></div>

Metadata can enrich your events and make application performance monitoring even more useful.
Let's explore the different types of metadata that Elastic APM offers.

<div id="data-model-labels"></div>

### Labels

Labels add **indexed** information to transactions, spans, and errors.
Indexed means the data is searchable and aggregatable in ((es)).
Add additional key-value pairs to define multiple labels.

* Indexed: Yes
* ((es)) type: [object](((ref))/object.html)
* ((es)) field: `labels`
* Applies to: <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Transactions</DocLink> | <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Spans</DocLink> | <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Errors</DocLink>

Label values can be a string, boolean, or number, although some agents only support string values at this time.
Because labels for a given key, regardless of agent used, are stored in the same place in ((es)),
all label values of a given key must have the same data type.
Multiple data types per key will throw an exception, for example: `{foo: bar}` and `{foo: 42}` is not allowed.

<DocCallOut title="Important" color="warning">
Avoid defining too many user-specified labels.
Defining too many unique fields in an index is a condition that can lead to a
[mapping explosion](((ref))/mapping.html#mapping-limit-settings).
</DocCallOut>

#### Agent API reference

* Go: [`SetLabel`](https://www.elastic.co/guide/en/apm/agent/go/${variables['apm-go-branch']}/api.html#context-set-label)
* Java: [`setLabel`](https://www.elastic.co/guide/en/apm/agent/java/${variables['apm-java-branch']}/public-api.html#api-transaction-add-tag)
* .NET: [`Labels`](https://www.elastic.co/guide/en/apm/agent/dotnet/${variables['apm-dotnet-branch']}/public-api.html#api-transaction-tags)
* Node.js: [`setLabel`](https://www.elastic.co/guide/en/apm/agent/nodejs/${variables['apm-node-branch']}/agent-api.html#apm-set-label) | [`addLabels`](https://www.elastic.co/guide/en/apm/agent/nodejs/${variables['apm-node-branch']}/agent-api.html#apm-add-labels)
* PHP: [`Transaction` `setLabel`](((apm-php-ref))/public-api.html#api-transaction-interface-set-label) | [`Span` `setLabel`](((apm-php-ref))/public-api.html#api-span-interface-set-label)
* Python: [`elasticapm.label()`](https://www.elastic.co/guide/en/apm/agent/python/${variables['apm-py-branch']}/api.html#api-label)
* Ruby:  [`set_label`](https://www.elastic.co/guide/en/apm/agent/ruby/${variables['apm-ruby-branch']}/api.html#api-agent-set-label)
* Rum: [`addLabels`](https://www.elastic.co/guide/en/apm/agent/rum-js/${variables['apm-rum-branch']}/agent-api.html#apm-add-labels)

<div id="data-model-custom"></div>

### Custom context

Custom context adds **non-indexed**,
custom contextual information to transactions and errors.
Non-indexed means the data is not searchable or aggregatable in ((es)),
and you cannot build dashboards on top of the data.
This also means you don't have to worry about [mapping explosions](((ref))/mapping.html#mapping-limit-settings),
as these fields are not added to the mapping.

Non-indexed information is useful for providing contextual information to help you
quickly debug performance issues or errors.

* Indexed: No
* ((es)) type: [object](((ref))/object.html)
* ((es)) fields: `transaction.custom` | `error.custom`
* Applies to: <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Transactions</DocLink> | <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Errors</DocLink>

<DocCallOut title="Important" color="warning">
Setting a circular object, a large object, or a non JSON serializable object can lead to errors.
</DocCallOut>

#### Agent API reference

* Go: [`SetCustom`](https://www.elastic.co/guide/en/apm/agent/go/${variables['apm-go-branch']}/api.html#context-set-custom)
* iOS: _coming soon_
* Java: [`addCustomContext`](https://www.elastic.co/guide/en/apm/agent/java/${variables['apm-java-branch']}/public-api.html#api-transaction-add-custom-context)
* .NET: _coming soon_
* Node.js: [`setCustomContext`](https://www.elastic.co/guide/en/apm/agent/nodejs/${variables['apm-node-branch']}/agent-api.html#apm-set-custom-context)
* PHP: _coming soon_
* Python: [`set_custom_context`](https://www.elastic.co/guide/en/apm/agent/python/${variables['apm-py-branch']}/api.html#api-set-custom-context)
* Ruby: [`set_custom_context`](https://www.elastic.co/guide/en/apm/agent/ruby/${variables['apm-ruby-branch']}/api.html#api-agent-set-custom-context)
* Rum: [`setCustomContext`](https://www.elastic.co/guide/en/apm/agent/rum-js/${variables['apm-rum-branch']}/agent-api.html#apm-set-custom-context)

<div id="data-model-user"></div>

### User context

User context adds **indexed** user information to transactions and errors.
Indexed means the data is searchable and aggregatable in ((es)).

* Indexed: Yes
* ((es)) type: [keyword](((ref))/keyword.html)
* ((es)) fields: `user.email` | `user.name` | `user.id`
* Applies to: <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Transactions</DocLink> | <DocLink id="serverlessObservabilityApmSpansTransactionsErrorsMetricsMetadata">Errors</DocLink>

#### Agent API reference

* Go: [`SetUsername`](https://www.elastic.co/guide/en/apm/agent/go/${variables['apm-go-branch']}/api.html#context-set-username) | [`SetUserID`](https://www.elastic.co/guide/en/apm/agent/go/${variables['apm-go-branch']}/api.html#context-set-user-id) |
    [`SetUserEmail`](https://www.elastic.co/guide/en/apm/agent/go/${variables['apm-go-branch']}/api.html#context-set-user-email)

* iOS: _coming soon_
* Java: [`setUser`](https://www.elastic.co/guide/en/apm/agent/java/${variables['apm-java-branch']}/public-api.html#api-transaction-set-user)
* .NET _coming soon_
* Node.js: [`setUserContext`](https://www.elastic.co/guide/en/apm/agent/nodejs/${variables['apm-node-branch']}/agent-api.html#apm-set-user-context)
* PHP: _coming soon_
* Python: [`set_user_context`](https://www.elastic.co/guide/en/apm/agent/python/${variables['apm-py-branch']}/api.html#api-set-user-context)
* Ruby: [`set_user`](https://www.elastic.co/guide/en/apm/agent/ruby/${variables['apm-ruby-branch']}/api.html#api-agent-set-user)
* Rum: [`setUserContext`](https://www.elastic.co/guide/en/apm/agent/rum-js/${variables['apm-rum-branch']}/agent-api.html#apm-set-user-context)

